# 오늘 작업 반영 체크리스트

## ✅ 완료된 작업 (현재 파일에 반영됨)

### 1. 상대계정분석 기능
- ✅ 상태 변수 추가: `counterDrilldownAmountClicked`, `selectedVoucherNumber`
- ✅ 함수 구현: `getMonthlyTotalsForCounterAccount()`, `getJournalEntriesByVoucherNumber()`
- ✅ 상대계정 금액 클릭 시 월별 합계 표시 (3395-3456번 라인)
- ✅ 전표번호 클릭 시 분개장 drill-down (3529-3531번 라인 onClick, 3565-3638번 라인 UI)
- ✅ 전표번호 drill-down 엑셀 다운로드 (`handleVoucherDrilldownDownload`)

### 2. 일반사항분석 기능
- ✅ 상태 변수 추가: `generalDrilldownShowMonthly`
- ✅ 함수 구현: `getMonthlyTotalsForGeneralAccount()`, `getMonthlyTotalsForDebitCredit()`
- ✅ 계정별 차변/대변 금액 클릭 시 월별 합계 표시 (2603번 라인)
- ✅ 차변/대변 합계 카드 클릭 시 월별 합계 표시 (2786번 라인)
- ✅ 월별 합계 엑셀 다운로드 기능 (각 월별 합계 카드에 버튼 구현)

### 3. JSX 구조 오류 수정
- ✅ `activeCard === 'general'` 블록 닫기 태그 추가 (2941-2942번 라인)

### 4. 포트 변경
- ✅ `vite.config.ts`: 포트 8080 → 8081 변경
- ✅ `start-dev.bat`: 포트 8080 → 8081 변경

### 5. 배치파일 생성
- ✅ `계정병원장-분개장-시작.bat` 생성
- ✅ `계정병원장-분개장-중지.bat` 생성

---

## ⚠️ 확인 필요 사항

### 1. 상대계정분석 월별 합계 위치
**요구사항**: "상대계정의 금액을 클릭하면 월별합계금액을 상세내역 표시 박스 위에 별도로 표시"

**현재 상태**: 
- 월별 합계가 상세내역 표시 박스 **안에** 표시됨 (3393번 라인 `<div>` 안에 3395번 라인)
- 상세내역 표시 박스 **위에** 별도로 표시되어야 함

**수정 필요 위치**: 
- `src/components/AIInsights.tsx` 3392-3393번 라인 근처
- 월별 합계 카드를 `counterDrilldownAccount` 조건 블록 **밖으로** 이동 필요

**수정 방법**:
```tsx
{/* 상세 내역 표시 (드릴다운) */}
{counterDrilldownAccount && (
  <div className="mt-3 space-y-2">
    {/* 월별 합계 표시 (금액 클릭 시) - 상세내역 위에 별도 표시 */}
    {counterDrilldownAmountClicked && (
      <Card className="bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800">
        {/* 월별 합계 내용 */}
      </Card>
    )}
    
    {/* 상세 내역 테이블 */}
    <Card>
      {/* 상세 내역 내용 */}
    </Card>
    
    {/* 전표번호 drill-down */}
    {selectedVoucherNumber && (
      {/* 전표번호 분개장 내용 */}
    )}
  </div>
)}
```

---

## 📋 작업 요약

### 완료된 기능
1. ✅ 상대계정분석 월별 합계 표시 (위치만 조정 필요)
2. ✅ 전표번호 drill-down 및 엑셀 다운로드
3. ✅ 일반사항분석 월별 합계 표시
4. ✅ 일반사항분석 월별 합계 엑셀 다운로드
5. ✅ JSX 구조 오류 수정
6. ✅ 포트 변경 (8080 → 8081)
7. ✅ 배치파일 생성 및 수정

### 수정 필요
1. ⚠️ 상대계정분석 월별 합계 위치 조정 (상세내역 위로 이동)

---

## 🔧 빠른 수정 가이드

### 상대계정분석 월별 합계 위치 수정
1. `src/components/AIInsights.tsx` 파일 열기
2. 3392번 라인 근처의 `{counterDrilldownAccount && (` 블록 찾기
3. 월별 합계 카드 (3395-3456번 라인)를 상세내역 테이블 카드 **위로** 이동
4. 구조 확인:
   - 월별 합계 카드 (금액 클릭 시)
   - 상세 내역 테이블 카드
   - 전표번호 drill-down (전표번호 클릭 시)
